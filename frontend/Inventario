<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Inventario de Refacciones</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 20px 0;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        h1 {
            font-size: 24px;
            font-weight: 600;
        }
        
        .requirement-id {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2a5298;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .search-section {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: #2a5298;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1e3c72;
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-col {
            flex: 1;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2a5298;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .low-stock {
            background-color: #fff3cd;
            color: #856404;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
        }
        
        .btn-sm {
            padding: 5px 10px;
            font-size: 14px;
        }
        
        .btn-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background-color: #e0a800;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .alert {
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2a5298;
        }
        
        .close {
            font-size: 24px;
            cursor: pointer;
            color: #aaa;
        }
        
        .close:hover {
            color: #333;
        }
        
        .footer-info {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            font-size: 14px;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .form-row, .search-section {
                flex-direction: column;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>Control de Inventario de Refacciones</h1>
                
            </div>
        </header>
        
        <div class="card">
            <div class="card-title">Búsqueda de Refacciones</div>
            <div class="search-section">
                <input type="text" class="search-input" id="searchInput" placeholder="Buscar por código o nombre...">
                <button class="btn btn-primary" id="searchBtn">Buscar</button>
                <button class="btn btn-success" id="addBtn">Agregar Refacción</button>
            </div>
        </div>
        
        <div id="alertMessage" class="alert"></div>
        
        <div class="card">
            <div class="card-title">Inventario de Refacciones</div>
            <table id="inventoryTable">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Nombre</th>
                        <th>Cantidad</th>
                        <th>Stock Mínimo</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="inventoryBody">
                    <!-- Los datos se cargarán dinámicamente con JavaScript -->
                </tbody>
            </table>
        </div>
        
        
    </div>
    
    <!-- Modal para agregar/editar refacciones -->
    <div class="modal" id="partModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Agregar Nueva Refacción</h3>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <form id="partForm">
                <div class="form-group">
                    <label class="form-label" for="partCode">Código *</label>
                    <input type="text" class="form-control" id="partCode" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="partName">Nombre *</label>
                    <input type="text" class="form-control" id="partName" required>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label" for="partQuantity">Cantidad *</label>
                            <input type="number" class="form-control" id="partQuantity" min="0" required>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label" for="partMinStock">Stock Mínimo *</label>
                            <input type="number" class="form-control" id="partMinStock" min="0" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="partDescription">Descripción</label>
                    <textarea class="form-control" id="partDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-success" id="saveBtn">Guardar Refacción</button>
                    <button type="button" class="btn btn-primary" id="cancelBtn">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Datos de ejemplo para el inventario
        let inventory = [
            { code: "DADWDADAW", name: "Filtro de Aire", quantity: 15, minStock: 5, description: "Filtro de aceite para motor" },
            { code: "DWADADADA", name: " xxxxx", quantity: 8, minStock: 10, description: "Pastillas de freno delanteras" },
            { code: "RFDWDADAW", name: "xxxxx", quantity: 25, minStock: 15, description: "Bujías de platino" },
            { code: "DWADWADAD", name: "xxxxx", quantity: 12, minStock: 8, description: "Aceite sintético para motor" },
            { code: "DAWDWDWAD", name: "Gas para aire", quantity: 5, minStock: 3, description: "Correa de distribución original" }
        ];

        // Elementos del DOM
        const inventoryBody = document.getElementById('inventoryBody');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const addBtn = document.getElementById('addBtn');
        const partModal = document.getElementById('partModal');
        const closeModal = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const partForm = document.getElementById('partForm');
        const modalTitle = document.getElementById('modalTitle');
        const alertMessage = document.getElementById('alertMessage');
        const partCode = document.getElementById('partCode');
        const partName = document.getElementById('partName');
        const partQuantity = document.getElementById('partQuantity');
        const partMinStock = document.getElementById('partMinStock');
        const partDescription = document.getElementById('partDescription');
        const saveBtn = document.getElementById('saveBtn');

        let editingIndex = -1; 

        
        function displayInventory(items = inventory) {
            inventoryBody.innerHTML = '';
            
            if (items.length === 0) {
                inventoryBody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No se encontraron refacciones</td></tr>';
                return;
            }
            
            items.forEach((item, index) => {
                const row = document.createElement('tr');
                
                
                const isLowStock = item.quantity <= item.minStock;
                const statusText = isLowStock ? 'Stock Bajo' : 'Disponible';
                const statusClass = isLowStock ? 'low-stock' : '';
                
                row.innerHTML = `
                    <td>${item.code}</td>
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${item.minStock}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td class="action-buttons">
                        <button class="btn btn-warning btn-sm edit-btn" data-index="${index}">Editar</button>
                        <button class="btn btn-danger btn-sm delete-btn" data-index="${index}">Eliminar</button>
                    </td>
                `;
                
                inventoryBody.appendChild(row);
            });
            
           
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    editPart(index);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    deletePart(index);
                });
            });
        }

        
        function searchParts() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                displayInventory();
                return;
            }
            
            const filteredInventory = inventory.filter(item => 
                item.code.toLowerCase().includes(searchTerm) || 
                item.name.toLowerCase().includes(searchTerm)
            );
            
            displayInventory(filteredInventory);
        }

        
        function showModal() {
            partModal.style.display = 'flex';
        }

        
        function hideModal() {
            partModal.style.display = 'none';
            partForm.reset();
            editingIndex = -1;
            modalTitle.textContent = 'Agregar Nueva Refacción';
        }

        
        function addPart() {
            modalTitle.textContent = 'Agregar Nueva Refacción';
            showModal();
        }

        
        function editPart(index) {
            const part = inventory[index];
            partCode.value = part.code;
            partName.value = part.name;
            partQuantity.value = part.quantity;
            partMinStock.value = part.minStock;
            partDescription.value = part.description || '';
            
            editingIndex = index;
            modalTitle.textContent = 'Editar Refacción';
            showModal();
        }

        
        function deletePart(index) {
            if (confirm('¿Está seguro de que desea eliminar esta refacción?')) {
                inventory.splice(index, 1);
                displayInventory();
                showAlert('Refacción eliminada correctamente', 'success');
            }
        }

       
        function savePart(event) {
            event.preventDefault();
            
            const code = partCode.value.trim();
            const name = partName.value.trim();
            const quantity = parseInt(partQuantity.value);
            const minStock = parseInt(partMinStock.value);
            const description = partDescription.value.trim();
            
            
            if (!code || !name || isNaN(quantity) || isNaN(minStock)) {
                showAlert('Todos los campos marcados con * son obligatorios', 'danger');
                return;
            }
            
            if (quantity < 0 || minStock < 0) {
                showAlert('No se permiten cantidades negativas', 'danger');
                return;
            }
            
            
            if (editingIndex === -1) {
                const duplicate = inventory.find(item => item.code === code);
                if (duplicate) {
                    showAlert('Ya existe una refacción con este código', 'danger');
                    return;
                }
            }
            
            const partData = {
                code,
                name,
                quantity,
                minStock,
                description
            };
            
            if (editingIndex === -1) {
               
                inventory.push(partData);
                showAlert('Refacción agregada correctamente', 'success');
            } else {
               
                inventory[editingIndex] = partData;
                showAlert('Refacción actualizada correctamente', 'success');
            }
            
            hideModal();
            displayInventory();
        }

        // Función para mostrar alertas
        function showAlert(message, type) {
            alertMessage.textContent = message;
            alertMessage.className = `alert alert-${type}`;
            alertMessage.style.display = 'block';
            
            setTimeout(() => {
                alertMessage.style.display = 'none';
            }, 5000);
        }

        // Event Listeners
        searchBtn.addEventListener('click', searchParts);
        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                searchParts();
            }
        });
        
        addBtn.addEventListener('click', addPart);
        closeModal.addEventListener('click', hideModal);
        cancelBtn.addEventListener('click', hideModal);
        partForm.addEventListener('submit', savePart);

        // Cerrar modal al hacer clic fuera del contenido
        window.addEventListener('click', (e) => {
            if (e.target === partModal) {
                hideModal();
            }
        });

        // Inicializar la aplicación
        displayInventory();
    </script>
</body>
</html>
